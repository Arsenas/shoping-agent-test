import type { ReactNode } from "react";
import { useEffect, useRef } from "react";

type Props = {
  open: boolean;
  onClose: () => void;
  onBack?: () => void;
  modalTitle?: ReactNode;
  children: ReactNode;
  mode?: "default" | "answer";
  showTitle?: boolean;
  rightSlot?: ReactNode;
  extraClass?: string;
};

function ModalScreen({ show, children }: { show: boolean; children: ReactNode }) {
  if (!show) return null;
  return <>{children}</>;
}

function ThemeTester() {
  const setTheme = (theme: string) => {
    document.body.setAttribute("data-theme", theme);
  };
  return (
    <div
      style={{
        display: "flex",
        gap: "6px",
        flexWrap: "wrap",
        justifyContent: "center",
        marginTop: "8px",
      }}
    >
      <button onClick={() => setTheme("alcemi-default")}>Default</button>
      <button onClick={() => setTheme("neutral-light")}>Neutral Light</button>
      <button onClick={() => setTheme("neutral-dark")}>Neutral Dark</button>
      <button onClick={() => setTheme("light-pink")}>Light Pink</button>
    </div>
  );
}

export default function Modal({
  open,
  onClose,
  onBack,
  modalTitle,
  children,
  mode = "default",
  showTitle = true,
  rightSlot,
  extraClass = "",
}: Props) {
  const dlgRef = useRef<HTMLDialogElement | null>(null);
  const headRef = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    const dlg = dlgRef.current;
    if (!dlg) return;
    if (open && !dlg.open) {
      dlg.showModal();
    } else if (!open && dlg.open) {
      dlg.close();
    }
  }, [open]);

  useEffect(() => {
    const dlg = dlgRef.current;
    if (!dlg) return;
    const onCancel = (e: Event) => {
      e.preventDefault();
      onClose();
    };
    dlg.addEventListener("cancel", onCancel);
    return () => dlg.removeEventListener("cancel", onCancel);
  }, [onClose]);

  useEffect(() => {
    const head = headRef.current;
    if (!head) return;
    const root = document.documentElement;
    const ro = new ResizeObserver((entries) => {
      const h = entries[0]?.contentRect.height ?? 0;
      root.style.setProperty("--head-h", `${h}px`);
    });
    ro.observe(head);
    return () => ro.disconnect();
  }, []);

  const labelProps =
    mode === "answer"
      ? {
          "aria-label": typeof modalTitle === "string" ? modalTitle : undefined,
        }
      : { "aria-labelledby": "modal-title" };

  return (
    <dialog id="ai-modal" ref={dlgRef} className="modal-root" {...labelProps} onClick={onClose}>
      <div className={`modal-card ${extraClass}`} onClick={(e) => e.stopPropagation()}>
        <div className="modal-ctr">
          <div className="modal-head" role="toolbar" aria-label="AI modal navigation" ref={headRef}>
            <button type="button" className="head-logo-mobile" onClick={onBack ?? onClose}>
              {/* Inline mobile logo */}
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 36" width="90" height="36">
                <path
                  d="M11.4351 5.73607H9.94039V8.07568H8.75202V1.28895H11.4351C12.7999 1.28895 13.6819 2.18023 13.6819 3.50787C13.6819 4.81694 12.7906 5.73607 11.4351 5.73607ZM11.203 2.34734H9.94039V4.67767H11.1845C12.0015 4.67767 12.4378 4.24132 12.4378 3.49858C12.4378 2.75585 11.9922 2.34734 11.203 2.34734ZM13.6472 5.77321C13.6472 4.34344 14.6777 3.35932 16.0982 3.35932C17.5187 3.35932 18.5492 4.34344 18.5492 5.77321C18.5492 7.20297 17.5187 8.18709 16.0982 8.18709C14.6777 8.18709 13.6472 7.20297 13.6472 5.77321ZM14.7798 5.77321C14.7798 6.60878 15.3183 7.17512 16.0982 7.17512C16.8781 7.17512 17.4166 6.60878 17.4166 5.77321C17.4166 4.93763 16.8781 4.3713 16.0982 4.3713C15.3183 4.3713 14.7798 4.93763 14.7798 5.77321ZM19.861 8.07568L18.3755 3.4893H19.5546L20.1581 5.45754C20.2602 5.81963 20.353 6.21885 20.4366 6.64592C20.5202 6.20028 20.6037 5.91247 20.7523 5.45754L21.3836 3.4893H22.5348L23.1476 5.45754C23.2033 5.64323 23.389 6.33026 23.4447 6.63664C23.5189 6.29312 23.6675 5.74535 23.751 5.45754L24.3638 3.4893H25.5615L23.9739 8.07568H22.9155L22.2841 6.08887C22.0985 5.4854 21.9963 5.04904 21.9592 4.81694C21.9128 5.03047 21.8292 5.35542 21.5971 6.10744L20.9658 8.07568H19.861ZM27.7011 8.19638C26.3363 8.19638 25.3801 7.20297 25.3801 5.78249C25.3801 4.34344 26.3178 3.35004 27.664 3.35004C29.038 3.35004 29.9107 4.26917 29.9107 5.69893V6.04245L26.457 6.05173C26.5406 6.85946 26.9677 7.26796 27.7197 7.26796C28.3417 7.26796 28.7502 7.02657 28.8802 6.59021H29.9293C29.7343 7.59291 28.8988 8.19638 27.7011 8.19638ZM27.6733 4.27845C27.0048 4.27845 26.5963 4.64054 26.4849 5.32757H28.7874C28.7874 4.69624 28.351 4.27845 27.6733 4.27845ZM33.324 3.47073V4.51984H32.9062C32.0892 4.51984 31.5786 4.9562 31.5786 5.84748V8.07568H30.4459V3.49858H31.5136L31.5786 4.16704C31.7735 3.71212 32.2099 3.40574 32.8226 3.40574C32.9805 3.40574 33.1383 3.42431 33.324 3.47073ZM35.617 8.19638C34.2522 8.19638 33.2959 7.20297 33.2959 5.78249C33.2959 4.34344 34.2336 3.35004 35.5798 3.35004C36.9539 3.35004 37.8266 4.26917 37.8266 5.69893V6.04245L34.3729 6.05173C34.4564 6.85946 34.8835 7.26796 35.6355 7.26796C36.2576 7.26796 36.6661 7.02657 36.796 6.59021H37.8452C37.6502 7.59291 36.8146 8.19638 35.617 8.19638ZM35.5891 4.27845C34.9206 4.27845 34.5121 4.64054 34.4007 5.32757H36.7032C36.7032 4.69624 36.2668 4.27845 35.5891 4.27845ZM40.2464 8.19638C38.9188 8.19638 38.0925 7.22154 38.0925 5.80106C38.0925 4.3713 38.9281 3.35004 40.3114 3.35004C40.952 3.35004 41.5184 3.61928 41.8062 4.0742V1.16825H42.9296V8.07568H41.8897L41.8155 7.3608C41.5369 7.89 40.9427 8.19638 40.2464 8.19638ZM40.4971 7.15655C41.2863 7.15655 41.7969 6.59021 41.7969 5.76392C41.7969 4.93763 41.2863 4.36201 40.4971 4.36201C39.7079 4.36201 39.2252 4.94691 39.2252 5.76392C39.2252 6.58093 39.7079 7.15655 40.4971 7.15655ZM46.9187 8.07568H45.8696V1.16825H47.0023V4.15776C47.2994 3.64713 47.9121 3.34075 48.6084 3.34075C49.9175 3.34075 50.7159 4.36201 50.7159 5.81034C50.7159 7.22154 49.8525 8.19638 48.5342 8.19638C47.8471 8.19638 47.2622 7.89 46.993 7.3608L46.9187 8.07568ZM47.0115 5.76392C47.0115 6.59021 47.5222 7.15655 48.302 7.15655C49.1005 7.15655 49.574 6.58093 49.574 5.76392C49.574 4.94691 49.1005 4.36201 48.302 4.36201C47.5222 4.36201 47.0115 4.93763 47.0115 5.76392ZM50.675 10.2018V9.25477H51.3527C51.7983 9.25477 52.0769 9.15265 52.2718 8.61417L52.4018 8.27065L50.5543 3.4893H51.7519L52.931 6.8316L54.1751 3.4893H55.3449L53.0981 9.09694C52.7546 9.95109 52.2718 10.3039 51.5198 10.3039C51.2042 10.3039 50.9256 10.2668 50.675 10.2018Z"
                  fill="currentColor"
                />
                <path
                  d="M3.87083 25.265H1.33838L6.3652 11.346H8.85958L13.8864 25.265H11.3159L10.1924 22.0471H4.99425L3.87083 25.265ZM7.29821 15.497L5.71781 19.9907H9.48793L7.88848 15.497C7.77424 15.1352 7.64095 14.7163 7.60287 14.4307C7.54575 14.6973 7.4315 15.1162 7.29821 15.497Z"
                  fill="currentColor"
                />
                <path d="M17.6311 25.265H15.3271V11.0985H17.6311V25.265Z" fill="currentColor" />
                <path
                  d="M19.5157 20.5429C19.5157 17.6296 21.4388 15.5732 24.2188 15.5732C26.7894 15.5732 28.5411 17.0012 28.7887 19.2671H26.4657C26.1991 18.2008 25.4184 17.6486 24.314 17.6486C22.8288 17.6486 21.8387 18.772 21.8387 20.5429C21.8387 22.3137 22.7527 23.418 24.2379 23.418C25.3994 23.418 26.2181 22.8468 26.4657 21.8186H28.8077C28.5221 24.0083 26.6942 25.5126 24.2379 25.5126C21.3817 25.5126 19.5157 23.5323 19.5157 20.5429Z"
                  fill="currentColor"
                />
                <path
                  d="M34.7448 25.5126C31.9457 25.5126 29.9845 23.4752 29.9845 20.5619C29.9845 17.6105 31.9077 15.5732 34.6686 15.5732C37.4867 15.5732 39.2765 17.4582 39.2765 20.3905V21.095L32.1933 21.1141C32.3647 22.7706 33.2405 23.6085 34.7829 23.6085C36.0586 23.6085 36.8964 23.1134 37.163 22.2185H39.3146C38.9148 24.2749 37.2011 25.5126 34.7448 25.5126ZM34.6877 17.4773C33.3167 17.4773 32.4789 18.2199 32.2504 19.6289H36.9726C36.9726 18.3341 36.0776 17.4773 34.6877 17.4773Z"
                  fill="currentColor"
                />
                <path
                  d="M43.4587 25.265H41.1357V15.8588H43.2683L43.4587 16.9631C43.9347 16.1825 44.8868 15.5732 46.2387 15.5732C47.6668 15.5732 48.6569 16.2777 49.152 17.363C49.628 16.2777 50.7324 15.5732 52.1605 15.5732C54.4454 15.5732 55.7021 16.9441 55.7021 19.1148V25.265H53.3981V19.7241C53.3981 18.3722 52.6746 17.6677 51.5702 17.6677C50.4468 17.6677 49.5899 18.3912 49.5899 19.9335V25.265H47.2669V19.705C47.2669 18.3912 46.5624 17.6867 45.458 17.6867C44.3536 17.6867 43.4587 18.4103 43.4587 19.9335V25.265Z"
                  fill="currentColor"
                />
                <path d="M57.9825 25.265V15.8588H60.3055V25.265H57.9825Z" fill="currentColor" />
                <path
                  d="M55.5429 11.6938C58.0218 11.6938 59.1023 10.651 59.1023 8.13452C59.1023 10.651 60.1752 11.6938 62.6616 11.6938C60.1752 11.6938 59.1023 12.7668 59.1023 15.2532C59.1023 12.7668 58.0218 11.6938 55.5429 11.6938Z"
                  fill="currentColor"
                />
              </svg>
            </button>

            <button className="icon-btn head-back" onClick={onBack ?? onClose}>
              <img src="/img/back.svg" alt="" aria-hidden="true" />
            </button>

            <div className="head-spacer" />

            {/* 611â€“790px: Powered by mobile logo headeryje */}
            <div className="powered-by powered-by--head">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 36" width="90" height="36">
                <path
                  d="M11.4351 5.73607H9.94039V8.07568H8.75202V1.28895H11.4351C12.7999 1.28895 13.6819 2.18023 13.6819 3.50787C13.6819 4.81694 12.7906 5.73607 11.4351 5.73607ZM11.203 2.34734H9.94039V4.67767H11.1845C12.0015 4.67767 12.4378 4.24132 12.4378 3.49858C12.4378 2.75585 11.9922 2.34734 11.203 2.34734ZM13.6472 5.77321C13.6472 4.34344 14.6777 3.35932 16.0982 3.35932C17.5187 3.35932 18.5492 4.34344 18.5492 5.77321C18.5492 7.20297 17.5187 8.18709 16.0982 8.18709C14.6777 8.18709 13.6472 7.20297 13.6472 5.77321ZM14.7798 5.77321C14.7798 6.60878 15.3183 7.17512 16.0982 7.17512C16.8781 7.17512 17.4166 6.60878 17.4166 5.77321C17.4166 4.93763 16.8781 4.3713 16.0982 4.3713C15.3183 4.3713 14.7798 4.93763 14.7798 5.77321ZM19.861 8.07568L18.3755 3.4893H19.5546L20.1581 5.45754C20.2602 5.81963 20.353 6.21885 20.4366 6.64592C20.5202 6.20028 20.6037 5.91247 20.7523 5.45754L21.3836 3.4893H22.5348L23.1476 5.45754C23.2033 5.64323 23.389 6.33026 23.4447 6.63664C23.5189 6.29312 23.6675 5.74535 23.751 5.45754L24.3638 3.4893H25.5615L23.9739 8.07568H22.9155L22.2841 6.08887C22.0985 5.4854 21.9963 5.04904 21.9592 4.81694C21.9128 5.03047 21.8292 5.35542 21.5971 6.10744L20.9658 8.07568H19.861ZM27.7011 8.19638C26.3363 8.19638 25.3801 7.20297 25.3801 5.78249C25.3801 4.34344 26.3178 3.35004 27.664 3.35004C29.038 3.35004 29.9107 4.26917 29.9107 5.69893V6.04245L26.457 6.05173C26.5406 6.85946 26.9677 7.26796 27.7197 7.26796C28.3417 7.26796 28.7502 7.02657 28.8802 6.59021H29.9293C29.7343 7.59291 28.8988 8.19638 27.7011 8.19638ZM27.6733 4.27845C27.0048 4.27845 26.5963 4.64054 26.4849 5.32757H28.7874C28.7874 4.69624 28.351 4.27845 27.6733 4.27845ZM33.324 3.47073V4.51984H32.9062C32.0892 4.51984 31.5786 4.9562 31.5786 5.84748V8.07568H30.4459V3.49858H31.5136L31.5786 4.16704C31.7735 3.71212 32.2099 3.40574 32.8226 3.40574C32.9805 3.40574 33.1383 3.42431 33.324 3.47073ZM35.617 8.19638C34.2522 8.19638 33.2959 7.20297 33.2959 5.78249C33.2959 4.34344 34.2336 3.35004 35.5798 3.35004C36.9539 3.35004 37.8266 4.26917 37.8266 5.69893V6.04245L34.3729 6.05173C34.4564 6.85946 34.8835 7.26796 35.6355 7.26796C36.2576 7.26796 36.6661 7.02657 36.796 6.59021H37.8452C37.6502 7.59291 36.8146 8.19638 35.617 8.19638ZM35.5891 4.27845C34.9206 4.27845 34.5121 4.64054 34.4007 5.32757H36.7032C36.7032 4.69624 36.2668 4.27845 35.5891 4.27845ZM40.2464 8.19638C38.9188 8.19638 38.0925 7.22154 38.0925 5.80106C38.0925 4.3713 38.9281 3.35004 40.3114 3.35004C40.952 3.35004 41.5184 3.61928 41.8062 4.0742V1.16825H42.9296V8.07568H41.8897L41.8155 7.3608C41.5369 7.89 40.9427 8.19638 40.2464 8.19638ZM40.4971 7.15655C41.2863 7.15655 41.7969 6.59021 41.7969 5.76392C41.7969 4.93763 41.2863 4.36201 40.4971 4.36201C39.7079 4.36201 39.2252 4.94691 39.2252 5.76392C39.2252 6.58093 39.7079 7.15655 40.4971 7.15655ZM46.9187 8.07568H45.8696V1.16825H47.0023V4.15776C47.2994 3.64713 47.9121 3.34075 48.6084 3.34075C49.9175 3.34075 50.7159 4.36201 50.7159 5.81034C50.7159 7.22154 49.8525 8.19638 48.5342 8.19638C47.8471 8.19638 47.2622 7.89 46.993 7.3608L46.9187 8.07568ZM47.0115 5.76392C47.0115 6.59021 47.5222 7.15655 48.302 7.15655C49.1005 7.15655 49.574 6.58093 49.574 5.76392C49.574 4.94691 49.1005 4.36201 48.302 4.36201C47.5222 4.36201 47.0115 4.93763 47.0115 5.76392ZM50.675 10.2018V9.25477H51.3527C51.7983 9.25477 52.0769 9.15265 52.2718 8.61417L52.4018 8.27065L50.5543 3.4893H51.7519L52.931 6.8316L54.1751 3.4893H55.3449L53.0981 9.09694C52.7546 9.95109 52.2718 10.3039 51.5198 10.3039C51.2042 10.3039 50.9256 10.2668 50.675 10.2018Z"
                  fill="currentColor"
                />
                <path
                  d="M3.87083 25.265H1.33838L6.3652 11.346H8.85958L13.8864 25.265H11.3159L10.1924 22.0471H4.99425L3.87083 25.265ZM7.29821 15.497L5.71781 19.9907H9.48793L7.88848 15.497C7.77424 15.1352 7.64095 14.7163 7.60287 14.4307C7.54575 14.6973 7.4315 15.1162 7.29821 15.497Z"
                  fill="currentColor"
                />
                <path d="M17.6311 25.265H15.3271V11.0985H17.6311V25.265Z" fill="#FCFCFC" />
                <path
                  d="M19.5157 20.5429C19.5157 17.6296 21.4388 15.5732 24.2188 15.5732C26.7894 15.5732 28.5411 17.0012 28.7887 19.2671H26.4657C26.1991 18.2008 25.4184 17.6486 24.314 17.6486C22.8288 17.6486 21.8387 18.772 21.8387 20.5429C21.8387 22.3137 22.7527 23.418 24.2379 23.418C25.3994 23.418 26.2181 22.8468 26.4657 21.8186H28.8077C28.5221 24.0083 26.6942 25.5126 24.2379 25.5126C21.3817 25.5126 19.5157 23.5323 19.5157 20.5429Z"
                  fill="currentColor"
                />
                <path
                  d="M34.7448 25.5126C31.9457 25.5126 29.9845 23.4752 29.9845 20.5619C29.9845 17.6105 31.9077 15.5732 34.6686 15.5732C37.4867 15.5732 39.2765 17.4582 39.2765 20.3905V21.095L32.1933 21.1141C32.3647 22.7706 33.2405 23.6085 34.7829 23.6085C36.0586 23.6085 36.8964 23.1134 37.163 22.2185H39.3146C38.9148 24.2749 37.2011 25.5126 34.7448 25.5126ZM34.6877 17.4773C33.3167 17.4773 32.4789 18.2199 32.2504 19.6289H36.9726C36.9726 18.3341 36.0776 17.4773 34.6877 17.4773Z"
                  fill="currentColor"
                />
                <path
                  d="M43.4587 25.265H41.1357V15.8588H43.2683L43.4587 16.9631C43.9347 16.1825 44.8868 15.5732 46.2387 15.5732C47.6668 15.5732 48.6569 16.2777 49.152 17.363C49.628 16.2777 50.7324 15.5732 52.1605 15.5732C54.4454 15.5732 55.7021 16.9441 55.7021 19.1148V25.265H53.3981V19.7241C53.3981 18.3722 52.6746 17.6677 51.5702 17.6677C50.4468 17.6677 49.5899 18.3912 49.5899 19.9335V25.265H47.2669V19.705C47.2669 18.3912 46.5624 17.6867 45.458 17.6867C44.3536 17.6867 43.4587 18.4103 43.4587 19.9335V25.265Z"
                  fill="currentColor"
                />
                <path d="M57.9825 25.265V15.8588H60.3055V25.265H57.9825Z" fill="#FCFCFC" />
                <path
                  d="M55.5429 11.6938C58.0218 11.6938 59.1023 10.651 59.1023 8.13452C59.1023 10.651 60.1752 11.6938 62.6616 11.6938C60.1752 11.6938 59.1023 12.7668 59.1023 15.2532C59.1023 12.7668 58.0218 11.6938 55.5429 11.6938Z"
                  fill="currentColor"
                />
              </svg>
            </div>

            {rightSlot}

            <button className="icon-btn head-close" onClick={onClose}>
              <img src="/img/close.svg" alt="" aria-hidden="true" />
            </button>
          </div>
          <div className={`modal-col ${mode === "answer" ? "is-answer" : ""}`}>
            {mode !== "answer" && showTitle && modalTitle && (
              <h1 id="modal-title" className="modal-title">
                {modalTitle}
              </h1>
            )}
            <div className="modal-body">{children}</div>
          </div>

          <ThemeTester />

          <div className="modal-footer">
            <div className="powered-by powered-by--footer">
              {/* Inline desktop logo */}
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 180 40" width="180" height="40">
                <path
                  d="M11.4351 5.81175H9.94039V8.15137H8.75202V1.36463H11.4351C12.7999 1.36463 13.6819 2.25591 13.6819 3.58355C13.6819 4.89262 12.7906 5.81175 11.4351 5.81175ZM11.203 2.42303H9.94039V4.75336H11.1845C12.0015 4.75336 12.4378 4.317 12.4378 3.57427C12.4378 2.83153 11.9922 2.42303 11.203 2.42303ZM13.6472 5.84889C13.6472 4.41913 14.6777 3.435 16.0982 3.435C17.5187 3.435 18.5492 4.41913 18.5492 5.84889C18.5492 7.27865 17.5187 8.26278 16.0982 8.26278C14.6777 8.26278 13.6472 7.27865 13.6472 5.84889ZM14.7798 5.84889C14.7798 6.68447 15.3183 7.2508 16.0982 7.2508C16.8781 7.2508 17.4166 6.68447 17.4166 5.84889C17.4166 5.01331 16.8781 4.44698 16.0982 4.44698C15.3183 4.44698 14.7798 5.01331 14.7798 5.84889ZM19.861 8.15137L18.3755 3.56498H19.5546L20.1581 5.53323C20.2602 5.89531 20.353 6.29453 20.4366 6.7216C20.5202 6.27596 20.6037 5.98815 20.7523 5.53323L21.3836 3.56498H22.5348L23.1476 5.53323C23.2033 5.71891 23.389 6.40594 23.4447 6.71232C23.5189 6.3688 23.6675 5.82104 23.751 5.53323L24.3638 3.56498H25.5615L23.9739 8.15137H22.9155L22.2841 6.16455C22.0985 5.56108 21.9963 5.12472 21.9592 4.89262C21.9128 5.10616 21.8292 5.4311 21.5971 6.18312L20.9658 8.15137H19.861ZM27.7011 8.27206C26.3363 8.27206 25.3801 7.27865 25.3801 5.85817C25.3801 4.41913 26.3178 3.42572 27.664 3.42572C29.038 3.42572 29.9107 4.34485 29.9107 5.77462V6.11813L26.457 6.12742C26.5406 6.93514 26.9677 7.34364 27.7197 7.34364C28.3417 7.34364 28.7502 7.10225 28.8802 6.6659H29.9293C29.7343 7.66859 28.8988 8.27206 27.7011 8.27206ZM27.6733 4.35414C27.0048 4.35414 26.5963 4.71622 26.4849 5.40325H28.7874C28.7874 4.77193 28.351 4.35414 27.6733 4.35414ZM33.324 3.54641V4.59553H32.9062C32.0892 4.59553 31.5786 5.03188 31.5786 5.92316V8.15137H30.4459V3.57427H31.5136L31.5786 4.24273C31.7735 3.7878 32.2099 3.48142 32.8226 3.48142C32.9805 3.48142 33.1383 3.49999 33.324 3.54641ZM35.617 8.27206C34.2522 8.27206 33.2959 7.27865 33.2959 5.85817C33.2959 4.41913 34.2336 3.42572 35.5798 3.42572C36.9539 3.42572 37.8266 4.34485 37.8266 5.77462V6.11813L34.3729 6.12742C34.4564 6.93514 34.8835 7.34364 35.6355 7.34364C36.2576 7.34364 36.6661 7.10225 36.796 6.6659H37.8452C37.6502 7.66859 36.8146 8.27206 35.617 8.27206ZM35.5891 4.35414C34.9206 4.35414 34.5121 4.71622 34.4007 5.40325H36.7032C36.7032 4.77193 36.2668 4.35414 35.5891 4.35414ZM40.2464 8.27206C38.9188 8.27206 38.0925 7.29722 38.0925 5.87674C38.0925 4.44698 38.9281 3.42572 40.3114 3.42572C40.952 3.42572 41.5184 3.69496 41.8062 4.14989V1.24394H42.9296V8.15137H41.8897L41.8155 7.43649C41.5369 7.96568 40.9427 8.27206 40.2464 8.27206ZM40.4971 7.23223C41.2863 7.23223 41.7969 6.6659 41.7969 5.83961C41.7969 5.01331 41.2863 4.43769 40.4971 4.43769C39.7079 4.43769 39.2252 5.0226 39.2252 5.83961C39.2252 6.65661 39.7079 7.23223 40.4971 7.23223ZM46.9187 8.15137H45.8696V1.24394H47.0023V4.23344C47.2994 3.72281 47.9121 3.41643 48.6084 3.41643C49.9175 3.41643 50.7159 4.43769 50.7159 5.88603C50.7159 7.29722 49.8525 8.27206 48.5342 8.27206C47.8471 8.27206 47.2622 7.96568 46.993 7.43649L46.9187 8.15137ZM47.0115 5.83961C47.0115 6.6659 47.5222 7.23223 48.302 7.23223C49.1005 7.23223 49.574 6.65661 49.574 5.83961C49.574 5.0226 49.1005 4.43769 48.302 4.43769C47.5222 4.43769 47.0115 5.01331 47.0115 5.83961ZM50.675 10.2774V9.33046H51.3527C51.7983 9.33046 52.0769 9.22833 52.2718 8.68985L52.4018 8.34633L50.5543 3.56498H51.7519L52.931 6.90729L54.1751 3.56498H55.3449L53.0981 9.17263C52.7546 10.0268 52.2718 10.3796 51.5198 10.3796C51.2042 10.3796 50.9256 10.3424 50.675 10.2774Z"
                  fill="currentColor"
                />
                <path
                  d="M3.87083 25.3405H1.33838L6.3652 11.4215H8.85958L13.8864 25.3405H11.3159L10.1924 22.1225H4.99425L3.87083 25.3405ZM7.29821 15.5724L5.71781 20.0661H9.48793L7.88848 15.5724C7.77424 15.2106 7.64095 14.7917 7.60287 14.5061C7.54575 14.7727 7.4315 15.1916 7.29821 15.5724Z"
                  fill="url(#paint0_linear_91_9080)"
                />
                <path d="M17.6311 25.3405H15.3271V11.174H17.6311V25.3405Z" fill="url(#paint1_linear_91_9080)" />
                <path
                  d="M19.5157 20.6183C19.5157 17.705 21.4388 15.6486 24.2188 15.6486C26.7894 15.6486 28.5411 17.0767 28.7887 19.3425H26.4657C26.1991 18.2762 25.4184 17.7241 24.314 17.7241C22.8288 17.7241 21.8387 18.8475 21.8387 20.6183C21.8387 22.3891 22.7527 23.4935 24.2379 23.4935C25.3994 23.4935 26.2181 22.9223 26.4657 21.894H28.8077C28.5221 24.0838 26.6942 25.588 24.2379 25.588C21.3817 25.588 19.5157 23.6077 19.5157 20.6183Z"
                  fill="url(#paint2_linear_91_9080)"
                />
                <path
                  d="M34.7448 25.588C31.9457 25.588 29.9845 23.5506 29.9845 20.6373C29.9845 17.686 31.9077 15.6486 34.6686 15.6486C37.4867 15.6486 39.2765 17.5336 39.2765 20.466V21.1705L32.1933 21.1895C32.3647 22.8461 33.2405 23.6839 34.7829 23.6839C36.0586 23.6839 36.8964 23.1888 37.163 22.2939H39.3146C38.9148 24.3503 37.2011 25.588 34.7448 25.588ZM34.6877 17.5527C33.3167 17.5527 32.4789 18.2953 32.2504 19.7043H36.9726C36.9726 18.4095 36.0776 17.5527 34.6877 17.5527Z"
                  fill="url(#paint3_linear_91_9080)"
                />
                <path
                  d="M43.4587 25.3405H41.1357V15.9342H43.2683L43.4587 17.0386C43.9347 16.2579 44.8868 15.6486 46.2387 15.6486C47.6668 15.6486 48.6569 16.3531 49.152 17.4384C49.628 16.3531 50.7324 15.6486 52.1605 15.6486C54.4454 15.6486 55.7021 17.0195 55.7021 19.1902V25.3405H53.3981V19.7995C53.3981 18.4476 52.6746 17.7431 51.5702 17.7431C50.4468 17.7431 49.5899 18.4667 49.5899 20.009V25.3405H47.2669V19.7805C47.2669 18.4667 46.5624 17.7621 45.458 17.7621C44.3536 17.7621 43.4587 18.4857 43.4587 20.009V25.3405Z"
                  fill="url(#paint4_linear_91_9080)"
                />
                <path d="M57.9825 25.3405V15.9342H60.3055V25.3405H57.9825Z" fill="url(#paint5_linear_91_9080)" />
                <path
                  d="M55.5429 11.7693C58.0218 11.7693 59.1023 10.7264 59.1023 8.20996C59.1023 10.7264 60.1752 11.7693 62.6616 11.7693C60.1752 11.7693 59.1023 12.8422 59.1023 15.3286C59.1023 12.8422 58.0218 11.7693 55.5429 11.7693Z"
                  fill="url(#paint6_linear_91_9080)"
                />
                <defs>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="1.11965"
                    y1="16.434"
                    x2="63.9111"
                    y2="16.434"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#001068" />
                    <stop offset="1" stop-color="#0623C5" />
                  </linearGradient>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="1.11965"
                    y1="16.434"
                    x2="63.9111"
                    y2="16.434"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#001068" />
                    <stop offset="1" stop-color="#0623C5" />
                  </linearGradient>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="1.11965"
                    y1="16.434"
                    x2="63.9111"
                    y2="16.434"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#001068" />
                    <stop offset="1" stop-color="#0623C5" />
                  </linearGradient>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="1.11965"
                    y1="16.434"
                    x2="63.9111"
                    y2="16.434"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#001068" />
                    <stop offset="1" stop-color="#0623C5" />
                  </linearGradient>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="1.11965"
                    y1="16.434"
                    x2="63.9111"
                    y2="16.434"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#001068" />
                    <stop offset="1" stop-color="#0623C5" />
                  </linearGradient>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="1.11965"
                    y1="16.434"
                    x2="63.9111"
                    y2="16.434"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#001068" />
                    <stop offset="1" stop-color="#0623C5" />
                  </linearGradient>
                  <linearGradient
                    id="alcemi-gradient"
                    x1="55.5175"
                    y1="11.5788"
                    x2="62.8066"
                    y2="11.5788"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#03115F" />
                    <stop offset="0.13" stop-color="#0623C5" />
                  </linearGradient>
                </defs>
              </svg>
            </div>
          </div>
        </div>

        <div id="modal-overlays" aria-hidden />
      </div>
    </dialog>
  );
}

Modal.Screen = ModalScreen;
